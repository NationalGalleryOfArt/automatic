"""FastAPI application using LiveAPI CRUD+ handlers."""

import uvicorn
from liveapi.implementation import create_app
from fastapi.responses import RedirectResponse

# Create the app from OpenAPI specification{% if single_spec %}
app = create_app("{{ spec_path }}"){% else %}
# Multiple specifications mode
spec_files = [{% for spec in spec_files %}
    "{{ spec }}",{% endfor %}
]

# For multiple specs, create composite app from all specifications
app = create_app(*spec_files){% endif %}

# Add redirect from root to docs for better UX
@app.get("/", include_in_schema=False)
async def redirect_to_docs():
    """Redirect root URL to API documentation."""
    return RedirectResponse(url="/docs")

if __name__ == "__main__":
    # Run the development server
    uvicorn.run(
        "main:app",
        host="0.0.0.0",
        port=8000,
        reload=True
    )